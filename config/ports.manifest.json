{
  "version": "1.0",
  "services": [
    {
      "name": "web-react",
      "pathHint": "clients/web-react",
      "env": [
        { "file": ".env.local", "key": "VITE_PORT", "value": 3001 },
        { "file": ".env.local", "key": "VITE_API_BASE", "value": "http://localhost:4010" },
        { "file": ".env.local", "key": "VITE_SSE_BASE", "value": "http://localhost:4010" }
      ],
      "ports": [3001],
      "purpose": "Frontend dev server (Vite/React)"
    },
    {
      "name": "backend-mvp",
      "pathHint": "backend",
      "env": [
        { "file": ".env", "key": "PORT", "value": 4010 }
      ],
      "ports": [4010],
      "purpose": "REST + SSE pour Observability, Router, Artifacts"
    },
    {
      "name": "ai-gateway",
      "pathHint": "ai/gateway",
      "env": [
        { "file": ".env", "key": "PORT", "value": 4001 }
      ],
      "ports": [4001],
      "purpose": "Gateway NestJS (routes IA, orchestrator proxy)"
    },
    {
      "name": "artifacts-service",
      "pathHint": "backend/artifacts",
      "env": [
        { "file": ".env", "key": "PORT", "value": 4011 }
      ],
      "ports": [4011],
      "optional": true,
      "purpose": "Service dédié artefacts (option)"
    }
  ],
  "externals": [
    { "name": "postgres", "ports": [5432] },
    { "name": "redis", "ports": [6379], "optional": true }
  ]
}