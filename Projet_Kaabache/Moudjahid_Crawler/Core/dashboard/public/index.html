<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA Dashboard - TikTok Live Analytics</title>
    <link rel="stylesheet" href="../../shared/tiktok-theme.css">
    <style>
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            text-align: center;
            padding: 30px 20px;
        }
        .stat-number {
            font-size: 48px;
            font-weight: 800;
            background: var(--tiktok-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .stat-label {
            color: var(--tiktok-light-gray);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>
    <div class="tiktok-container">
        <header class="tiktok-header">
            <div class="tiktok-logo">
                <div class="tiktok-logo-icon">ðŸ“Š</div>
                <div>
                    <h1 class="tiktok-title">AURA DASHBOARD</h1>
                    <span class="tiktok-subtitle">TikTok Live Analytics</span>
                </div>
            </div>
            <div class="tiktok-status">
                <span class="tiktok-status-dot online"></span>
                <span>SystÃ¨me actif</span>
            </div>
        </header>

        <div class="dashboard-grid">
            <div class="tiktok-card stat-card">
                <div class="stat-number" id="totalProfiles">0</div>
                <div class="stat-label">Profils analysÃ©s</div>
            </div>
            <div class="tiktok-card stat-card">
                <div class="stat-number" id="totalSessions">0</div>
                <div class="stat-label">Sessions live</div>
            </div>
            <div class="tiktok-card stat-card">
                <div class="stat-number" id="totalComments">0</div>
                <div class="stat-label">Messages interceptÃ©s</div>
            </div>
            <div class="tiktok-card stat-card">
                <div class="stat-number" id="totalGifts">0</div>
                <div class="stat-label">Cadeaux dÃ©tectÃ©s</div>
            </div>
        </div>

        <div class="tiktok-grid-2">
            <div class="tiktok-card">
                <h3 style="color: var(--tiktok-red); margin-bottom: 15px;">ðŸŽ¯ Actions rapides</h3>
                <div class="tiktok-grid-2" style="gap: 10px;">
                    <button class="tiktok-btn tiktok-btn-primary" onclick="startCapture()">DÃ©marrer capture</button>
                    <button class="tiktok-btn tiktok-btn-secondary" onclick="viewReports()">Voir rapports</button>
                    <button class="tiktok-btn tiktok-btn-secondary" onclick="exportData()">Exporter donnÃ©es</button>
                    <button class="tiktok-btn tiktok-btn-danger" onclick="stopCapture()">ArrÃªter capture</button>
                </div>
            </div>
            
            <div class="tiktok-card">
                <h3 style="color: var(--tiktok-red); margin-bottom: 15px;">ðŸ“¡ Status systÃ¨me</h3>
                <div id="systemStatus">
                    <div style="margin-bottom: 10px;">
                        <span style="color: var(--tiktok-blue);">Backend:</span> 
                        <span id="backendStatus">ðŸŸ¢ Actif</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <span style="color: var(--tiktok-blue);">Database:</span> 
                        <span id="dbStatus">ðŸŸ¢ ConnectÃ©</span>
                    </div>
                    <div>
                        <span style="color: var(--tiktok-blue);">Stealth Mode:</span> 
                        <span id="stealthStatus">ðŸŸ¢ Actif</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Charger les statistiques
        async function loadStats() {
            try {
                const response = await fetch('/api/reports/summary');
                const stats = await response.json();
                
                document.getElementById('totalProfiles').textContent = stats.total_profiles || 0;
                document.getElementById('totalSessions').textContent = stats.total_sessions || 0;
                document.getElementById('totalComments').textContent = stats.total_comments || 0;
                document.getElementById('totalGifts').textContent = stats.total_gifts || 0;
            } catch (error) {
                console.error('Erreur chargement stats:', error);
            }
        }

        function startCapture() {
            window.open('/lives', '_blank');
        }

        function viewReports() {
            window.open('/reports', '_blank');
        }

        function exportData() {
            window.open('/api/export/all', '_blank');
        }

        function stopCapture() {
            if (confirm('ArrÃªter toutes les captures en cours ?')) {
                fetch('/api/capture/stop', { method: 'POST' });
            }
        }

        // Charger au dÃ©marrage
        loadStats();
        setInterval(loadStats, 5000);
    </script>
</body>
</html>