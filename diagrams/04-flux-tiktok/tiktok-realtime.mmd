%% TikTok Live Real-time Data Flow
sequenceDiagram
    autonumber
    participant TT as ðŸŽµ TikTok Live
    participant ST as ðŸ‘» Stealth Logger
    participant FI as ðŸ° Fortress Ingestion
    participant RQ as ðŸ“¨ RabbitMQ
    participant DB as ðŸ—„ï¸ Fortress DB
    participant AN as ðŸ“Š Analytics

    Note over TT,AN: Real-time TikTok Live Intelligence Pipeline

    TT->>ST: WebSocket Connection [WS/443]
    Note right of ST: Chromium DevTools Protocol<br/>Stealth Mode Active

    ST->>ST: Extract Live Data<br/>â€¢ Chat Messages<br/>â€¢ Viewer Count<br/>â€¢ Gift Transactions
    
    ST->>FI: Raw Events [JSON]
    Note right of FI: Batch Size: 1000<br/>Flush Interval: 5s

    FI->>RQ: Publish to Queue [AMQP]
    Note right of RQ: Topic: live.raw<br/>Durability: true

    RQ->>FI: Consume Batch
    FI->>FI: Data Enrichment<br/>â€¢ ML Sentiment<br/>â€¢ User Correlation<br/>â€¢ Risk Scoring

    FI->>DB: Bulk Insert [TCP/5432]
    Note right of DB: Tables:<br/>â€¢ fortress_live_streams<br/>â€¢ fortress_chat_messages<br/>â€¢ fortress_viewers

    DB->>AN: Real-time Metrics
    AN->>AN: Generate Dashboards<br/>â€¢ Live Viewer Count<br/>â€¢ Message Rate<br/>â€¢ Revenue Tracking

    Note over TT,AN: Latency Target: <1s end-to-end<br/>Throughput: 1000 msg/s<br/>SLA: 99.9% uptime