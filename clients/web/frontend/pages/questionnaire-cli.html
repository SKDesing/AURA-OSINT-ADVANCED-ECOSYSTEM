<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Questionnaire CLI AURA - Démo</title>
  <link href="https://fonts.googleapis.com/css?family=Titan+One:400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One:400&display=swap" rel="stylesheet">
  <style>
    body {
      background: #181c1f;
      color: #25f4ee;
      font-family: 'Titan One', 'Arial', sans-serif;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .cli-container {
      background: #23272b;
      border-radius: 14px;
      padding: 2.5rem 2rem 2rem 2rem;
      box-shadow: 0 8px 44px #25f4ee44;
      max-width: 520px;
      width: 100%;
      font-family: monospace;
      min-height: 360px;
      margin: 2rem auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    .cli-title {
      font-family: 'Alfa Slab One', Arial, sans-serif;
      font-size: 1.7rem;
      color: #fe2c55;
      margin-bottom: 1.7rem;
      letter-spacing: 1px;
      text-align: center;
    }
    .cli-question {
      min-height: 62px;
      font-size: 1.1rem;
      white-space: pre-line;
      margin-bottom: 0.5rem;
      color: #25f4ee;
    }
    .cli-choice-list {
      margin: 0 0 1.2rem 0.2rem;
      padding: 0;
      list-style: none;
      color: #fff;
    }
    .cli-choice-list li {
      margin-bottom: .2rem;
      font-size: 1.03rem;
      color: #fff;
      letter-spacing: .5px;
    }
    .cli-input-row {
      margin-top: .7rem;
      display: flex;
      align-items: center;
    }
    .cli-arrow {
      color: #25f4ee;
      margin-right: 0.6rem;
      font-size: 1.3rem;
    }
    .cli-input {
      background: #181c1f;
      border: 1.3px solid #25f4ee;
      color: #fff;
      font-family: inherit;
      font-size: 1.11rem;
      border-radius: 8px;
      padding: 0.36rem 1.2rem;
      outline: none;
      width: 90%;
      min-width: 120px;
      max-width: 320px;
      transition: box-shadow .18s;
      box-shadow: 0 2px 6px #25f4ee11;
    }
    .cli-input:focus {
      box-shadow: 0 0 0 2px #fe2c55, 0 2px 6px #25f4ee11;
      border-color: #fe2c55;
    }
    .cli-recap {
      margin-top: 1rem;
      background: #181c1f;
      border-radius: 10px;
      padding: 1.3rem 1rem;
      color: #fe2c55;
      box-shadow: 0 2px 18px #25f4ee33;
      font-size: 1rem;
    }
    .cli-recap ul {
      list-style: square;
      padding-left: 1.4rem;
      margin-top: 1rem;
    }
    .cli-recap li {
      margin-bottom: .4rem;
      color: #25f4ee;
    }
    .cli-btn {
      margin-top: 1.3rem;
      background: linear-gradient(90deg,#25f4ee,#fe2c55);
      color: #fff;
      border: none;
      border-radius: 22px;
      padding: 0.7rem 2.4rem;
      font-size: 1.12rem;
      letter-spacing: 1px;
      font-family: 'Titan One', Arial, sans-serif;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 18px #fe2c5530;
      transition: background .18s, transform .18s;
    }
    .cli-btn:hover {
      background: linear-gradient(90deg,#fe2c55,#25f4ee);
      transform: scale(1.04);
    }
  </style>
</head>
<body>
  <div class="cli-container" id="cli">
    <div class="cli-title">AURA - Questionnaire d'entrée</div>
    <div class="cli-question" id="cli-question"></div>
    <ul class="cli-choice-list" id="cli-choices"></ul>
    <form id="cli-form" autocomplete="off" style="margin:0;">
      <div class="cli-input-row">
        <span class="cli-arrow">&gt;</span>
        <input id="cli-input" class="cli-input" type="text" autofocus placeholder="Votre réponse..." />
      </div>
    </form>
    <div class="cli-recap" id="cli-recap" style="display:none;"></div>
    <button id="cli-restart" class="cli-btn" style="display:none;">Nouvelle demande</button>
  </div>
  <script>
    const choixRole = [
      { key: "etatique", label: "1. Entité étatique (police, magistrature, cyber…)" },
      { key: "journaliste", label: "2. Journaliste d'investigation" },
      { key: "detective", label: "3. Détective privé / consultant" },
      { key: "autre", label: "4. Autre (spécifier)" }
    ];
    const questionsByRole = {
      etatique: [
        { key: "nom", label: "Quel est votre nom ?" },
        { key: "prenom", label: "Quel est votre prénom ?" },
        { key: "fonction", label: "Quelle est votre fonction ?" },
        { key: "organisme", label: "Pour quel organisme travaillez-vous ?" },
        { key: "email", label: "Votre email professionnel ?" },
        { key: "objet", label: "Quel est l'objet de votre demande ?" }
      ],
      journaliste: [
        { key: "nom", label: "Nom du journaliste ?" },
        { key: "prenom", label: "Prénom du journaliste ?" },
        { key: "media", label: "Pour quel média travaillez-vous ?" },
        { key: "carte", label: "Avez-vous une carte de presse ? (oui/non)" },
        { key: "email", label: "Votre email professionnel ?" },
        { key: "objet", label: "Quel est l'objet de votre enquête ?" }
      ],
      detective: [
        { key: "nom", label: "Votre nom ?" },
        { key: "prenom", label: "Votre prénom ?" },
        { key: "cabinet", label: "Nom du cabinet ou structure ?" },
        { key: "agrement", label: "Numéro d'agrément ?" },
        { key: "email", label: "Votre email professionnel ?" },
        { key: "type", label: "Quel est le type d'investigation ?" }
      ],
      autre: [
        { key: "nom", label: "Votre nom ?" },
        { key: "prenom", label: "Votre prénom ?" },
        { key: "structure", label: "Structure (si applicable) ?" },
        { key: "email", label: "Votre email ?" },
        { key: "objet", label: "Quel est l'objet de la prise de contact ?" }
      ]
    };

    let step = 0, role = "", data = {}, animating = false;
    const cliQ = document.getElementById("cli-question");
    const cliChoices = document.getElementById("cli-choices");
    const cliInput = document.getElementById("cli-input");
    const cliForm = document.getElementById("cli-form");
    const cliRecap = document.getElementById("cli-recap");
    const cliRestart = document.getElementById("cli-restart");

    function ask(text) {
      cliQ.textContent = "";
      animating = true;
      let i = 0;
      let interval = setInterval(() => {
        cliQ.textContent += text[i];
        i++;
        if (i >= text.length) { clearInterval(interval); animating = false; }
      }, 12);
    }

    function showRoleChoices() {
      cliChoices.innerHTML = "";
      choixRole.forEach(c => {
        const li = document.createElement("li");
        li.textContent = c.label;
        cliChoices.appendChild(li);
      });
    }

    function nextQuestion() {
      cliChoices.innerHTML = "";
      if (!role) {
        ask("Bienvenue sur la plateforme AURA.\nQui êtes-vous ?");
        showRoleChoices();
      } else if (step < questionsByRole[role].length) {
        ask(questionsByRole[role][step].label);
      }
    }

    function showRecap() {
      cliForm.style.display = "none";
      cliRecap.style.display = "";
      let s = "<b>Résumé de votre saisie :</b><ul>";
      Object.entries(data).forEach(([k,v]) => {
        s += `<li><b>${k}</b> : ${v}</li>`;
      });
      s += "</ul>";
      cliRecap.innerHTML = s;
      cliRestart.style.display = "";
    }

    cliForm.onsubmit = function(e) {
      e.preventDefault();
      if (animating || !cliInput.value.trim()) return;

      if (!role) {
        let val = cliInput.value.trim().toLowerCase();
        let found = choixRole.find(
          c => val === c.key || val === c.label[0] || val === c.label.toLowerCase()
        );
        if (found) {
          role = found.key;
          step = 0;
          cliInput.value = "";
          nextQuestion();
        }
      } else {
        let q = questionsByRole[role][step];
        data[q.key] = cliInput.value.trim();
        cliInput.value = "";
        step++;
        if (step >= questionsByRole[role].length) {
          ask("Merci, traitement en cours...");
          setTimeout(showRecap, 900);
        } else {
          nextQuestion();
        }
      }
    };

    cliRestart.onclick = () => { 
      step = 0; role = ""; data = {};
      cliRecap.style.display = "none";
      cliRestart.style.display = "none";
      cliForm.style.display = "";
      cliInput.value = "";
      nextQuestion();
    };

    nextQuestion();
  </script>
</body>
</html>